From f8cfa27eb78fe510ca1b6721e31363991d70a524 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?=C4=90inh=20Qu=E1=BB=91c=20C=C6=B0=E1=BB=9Dng?=
 <tr6r20@gmail.com>
Date: Sun, 14 Dec 2025 11:10:38 +0700
Subject: [PATCH 2/2] ADD mcu reset function

---
 boot/sources/app/uart_boot.cpp | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/boot/sources/app/uart_boot.cpp b/boot/sources/app/uart_boot.cpp
index 943c6bb..2ef5ae1 100644
--- a/boot/sources/app/uart_boot.cpp
+++ b/boot/sources/app/uart_boot.cpp
@@ -47,6 +47,16 @@ void uart_boot_write(uint8_t* data, uint8_t len) {
 }
 
 void uart_boot_rx_frame_parser(uint8_t ch) {
+
+	static uint8_t magic[3];
+	magic[0] = magic[1];
+	magic[1] = magic[2];
+	magic[2] = ch;
+	if (UART_BOOT_RESET_MAGIC_MATCH(magic))
+	{
+		sys_ctrl_reset();
+	}
+
 	switch (uart_boot_frame.state) {
 	case SOP_STATE: {
 		if (UART_BOOT_SOP_CHAR == ch) {
-- 
2.50.1

